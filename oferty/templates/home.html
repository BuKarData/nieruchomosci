{% load static %}
<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>BZBud - Warszawa</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <style>
      body,
      html {
        height: 100%;
        margin: 0;
      }
      .hero {
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
      }
      .oferta-img {
        max-width: 100%;
        max-height: 300px;
        object-fit: cover;
        border-radius: 10px;
        margin: 10px 0;
      }
      .btn-detal:hover {
        background-color: #0d6efd;
        color: #fff;
        transition: 0.3s ease;
      }
      .oferta-card {
        margin-bottom: 30px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4 shadow-sm">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'home' %}">BZBud</a>
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link fw-bold" href="{% url 'home' %}"
                >Strona główna</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'lista_ofert' %}">Oferta</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-5">
      <h1 class="text-center">BZBud</h1>
      <p class="text-center text-muted">Budujemy Twój komfort.</p>

      {% if oferty %} {% for oferta in oferty %}
      <div class="card oferta-card shadow-sm">
        <div class="row g-0">
          <div class="col-md-6">
            {% if oferta.zdjecie %}
            <img src="{{ oferta.zdjecie.url }}" alt="Zdjęcie inwestycji" class="oferta-img"/>
          {% endif %}
          
          <div class="col-md-6">
            <div class="card-body">
              <h4 class="card-title">{{ oferta.nazwa }}</h4>
              <p><strong>Adres:</strong> {{ oferta.adres }}</p>
              <p><strong>Metraż:</strong> {{ oferta.metraz_str }} m²</p>
              <p><strong>Pokoje:</strong> {{ oferta.pokoje }}</p>
              <p>
                <strong>Status:</strong>
                <span class="{{ oferta.status_class }}"
                  >{{ oferta.status_str }}</span
                >
              </p>
              <p><strong>Cena:</strong> {{ oferta.ostatnia_cena_str }}</p>
              <p><strong>Cena za m²:</strong> {{ oferta.cena_m2_str }}</p>

              <button
                type="button"
                class="btn btn-outline-primary btn-detal mt-2"
                data-bs-toggle="modal"
                data-bs-target="#modal{{ oferta.id }}"
              >
                Zobacz szczegóły
              </button>
            </div>
          </div>
        </div>
      </div>
      {% endfor %} {% else %}
      <p class="text-center mt-5">Brak inwestycji do wyświetlenia.</p>
      {% endif %}
    </div>

    <!-- Modal dla szczegółów oferty -->
    {% for oferta in oferty %}
    <div
      class="modal fade"
      id="modal{{ oferta.id }}"
      tabindex="-1"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ oferta.nazwa }}</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <p>{{ oferta.opis }}</p>
            {% if oferta.zdjecie %}
            <img
              src="{{ oferta.zdjecie.url }}"
              alt="Zdjęcie inwestycji"
              class="oferta-img"
            />
            {% endif %}
            <p><strong>Adres:</strong> {{ oferta.adres }}</p>
            <p><strong>Metraż:</strong> {{ oferta.metraz_str }} m²</p>
            <p><strong>Pokoje:</strong> {{ oferta.pokoje }}</p>
            <p><strong>Status:</strong> {{ oferta.status_str }}</p>
            <p><strong>Cena:</strong> {{ oferta.ostatnia_cena_str }}</p>
            <p><strong>Cena za m²:</strong> {{ oferta.cena_m2_str }}</p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Zamknij
            </button>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
