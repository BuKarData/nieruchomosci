{% load static %}
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>BZBUD Inwestycje</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        .inwestycja-card img { width: 100%; height: 250px; object-fit: cover; border-radius: 5px; }
        .btn-hover:hover { background-color: #0056b3; color: white; transition: 0.3s; }
    </style>
</head>
<body>
<div class="container mt-5">
    <h1 class="text-center mb-4">Nasze Inwestycje</h1>

    <div class="row">
        {% for inwestycja in inwestycje %}
        <div class="col-md-6 mb-4">
            <div class="card inwestycja-card shadow-sm">
                {% if inwestycja.zdjecie %}
                <img src="{{ inwestycja.zdjecie.url }}" alt="Zdjęcie inwestycji">
                {% endif %}
                <div class="card-body">
                    <h5 class="card-title">{{ inwestycja.nazwa }}</h5>
                    <p class="card-text">{{ inwestycja.opis|default:"Brak opisu" }}</p>
                    <button type="button" class="btn btn-primary btn-hover" data-bs-toggle="modal" data-bs-target="#modal{{ inwestycja.id }}">
                        Zobacz szczegóły
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal z lokalami inwestycji -->
        <div class="modal fade" id="modal{{ inwestycja.id }}" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">{{ inwestycja.nazwa }}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        {% for oferta in inwestycja.oferty.all %}
                        <div class="card mb-3">
                            <div class="row g-0">
                                <div class="col-md-8 p-3">
                                    <h6>{{ oferta.adres }}</h6>
                                    <p>Metraż: {{ oferta.metraz|default:"Brak" }} m²</p>
                                    <p>Status: {{ oferta.status }}</p>
                                    <p>Cena: {{ oferta.kwota|default:"Brak" }} zł</p>
                                    <p>{{ oferta.opis|default:"Brak opisu" }}</p>
                                </div>
                                <div class="col-md-4 p-3">
                                    {% if oferta.zdjecie %}
                                    <img src="{{ oferta.zdjecie.url }}" alt="Zdjęcie lokalu" style="width:100%; object-fit:cover; max-height:200px; border-radius:5px;">
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% empty %}
                        <p>Brak lokali w tej inwestycji.</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

      <!-- Przycisk Zobacz inne oferty -->
      <div class="text-center mt-4">
        <a
          href="{% url 'lista_ofert' %}"
          class="btn btn-primary btn-lg btn-hover"
          >Zobacz inne oferty</a
        >
      </div>

      <!-- Sekcja O nas -->
      <section class="container my-5 py-5 bg-light rounded shadow-sm">
        <div class="row align-items-center">
          <div class="col-md-6 mb-4 mb-md-0">
            <h2 class="mb-3">O nas</h2>
            <p class="lead">
              Rodzinna firma z Zielonki. Od lat budujemy komfortowe i nowoczesne
              mieszkania oraz domy, stawiając na jakość i zadowolenie naszych
              klientów.
            </p>
          </div>
          <div class="col-md-6 text-center">
            <img
              src="{% static 'BZBUD.png' %}"
              alt="O nas"
              class="img-fluid rounded shadow-sm"
              style="max-height: 300px; object-fit: cover"
            />
          </div>
        </div>
      </section>
    </div>

    <!-- Blok kontaktowy -->
    <div
      style="
        position: fixed;
        bottom: 10px;
        right: 10px;
        background: rgba(255, 255, 255, 0.9);
        padding: 12px 18px;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        font-size: 14px;
        line-height: 1.4;
      "
    >
      <strong>Kontakt:</strong><br />
      tel: +48 696 362 748<br />
      email: beatazochowska8@gmail.com
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
  </body>
</html>
